(function(e){e.fn.rating=function(){function r(t,r){var i=(r-Math.floor(r)).toFixed(2);var s=Math.ceil(r);if(i!=0){s=s-1}var o=e(t).find("[data-value="+s+"]");o.removeClass("fa-star-o").addClass("fa-star");o.prevAll("[data-value]").removeClass("fa-star-o").addClass("fa-star");o.nextAll("[data-value]").removeClass("fa-star").addClass("fa-star-o");var u=o.next("[data-value]");var a="fa-star-o";if(i>n.round.down){a="fa-star-half-o";if(i>n.round.up){a="fa-star"}}u.removeClass("fa-star-o").addClass(a)}function i(t){var n=e(t);n.find("[data-value]").removeClass("fa-star").addClass("fa-star-o")}function s(e,t){e.val(t).trigger("change");if(t===e.data("empty-value")){e.siblings(".rating-clear").hide()}else{e.siblings(".rating-clear").show()}}var t;var n={round:{down:.25,up:.75}};for(t=this.length-1;t>=0;t--){var o,u,a=e(this[t]),f=a.data("max")||5,l=a.data("min")||0,c=a.data("clearable")||null,h=a.data("readonly")||null,p="";for(u=l;u<=f;u++){p+=['<span class="fa fa-star-o"       data-value="',u,'"></span>'].join("")}if(c&&!h){p+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="glyphicon glyphicon-remove"></span> ',c,"</a>"].join("")}var d=a.clone(true).attr("type","hidden").data("max",f).data("min",l);o=['<div class="rating-input">',p,"</div>"].join("");a.replaceWith(e(o).append(d))}e(".rating-input").on("mouseenter","[data-value]",function(){var t=e(this).closest(".rating-input").find(".rating");var n=t.data("readonly");if(!n){var i=e(this);r(i.closest(".rating-input"),i.data("value"))}}).on("mouseleave","[data-value]",function(){var t=e(this),n=t.siblings("input"),s=n.val(),o=n.data("min"),u=n.data("max");if(s>=o&&s<=u){r(t.closest(".rating-input"),s)}else{i(t.closest(".rating-input"))}}).on("click","[data-value]",function(t){var n=e(this).closest(".rating-input").find(".rating");var r=n.data("readonly");if(!r){var i=e(this),o=i.data("value"),u=i.siblings("input");s(u,o);t.preventDefault();e.ajax({});return false}}).on("click",".rating-clear",function(t){var n=e(this),r=n.siblings("input");s(r,r.data("empty-value"));i(n.closest(".rating-input"));t.preventDefault();return false}).each(function(){var t=e(this).find("input"),n=t.val(),s=t.data("min"),o=t.data("max");if(n!==""&&+n>=s&&+n<=o){r(this,n);e(this).find(".rating-clear").show()}else{t.val(t.data("empty-value"));i(this)}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)